#!/bin/bash
# Copyright 2020 David Boyd, all rights reserved
# Program: ping-sweep-subnet2.sh
# Description:
#     Easy way to ping sweep a classless subnet
#     Dependencies: fping, nmap
# Date: 2020-01-22
# Revised:
#    2020-01-23 - set up for macOS
# Dependencies: fping, nmap

case "$OSTYPE" in
    linux*)
        ip=$(ip address show | grep 'inet ' | cut -d ' ' -f6 | tail -n1)
        ;;
    darwin*)
        # macOS
        ip=$(ip address show | grep 'inet ' | cut -d ' ' -f2 | tail -n1)
        ;;
    *)
        echo "$OSTYPE not recognized"
        exit
        ;;
esac
echo "Subnet Ping Sweeper"
echo "[1] fping"
echo "[2] nmap"
read -p "Enter choice: " choice

case $choice in
    1)  fping -a -g $ip 2>/dev/null
        ;;
    2)  nmap -n -sP $ip
        ;;
    *)  echo "Invalid choice"
        echo "Exiting program"
        exit;;
esac

