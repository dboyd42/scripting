#!/bin/bash
# Copyright 2020 David Boyd, all rights reserved
# Program: ping-sweeper.sh
# Description:
#     Ping sweep target IP range of 10.11.1.0/24
# Date: 2020-01-31
# Revised:
#    2020-02-05 - added `wait` cmd to prevent closing prgm
#               - added runtime =~ 10 sec
#               - rm write to file
# Notes

read -p "Enter Class C IP [x.x.x.]: " host
#host="192.168.1."

start=`date +%s`

for ip in `(seq 1 254)`; do
    ping -c1 $host$ip | grep "bytes from" | cut -d ' ' -f4 | \
        cut -d ':' -f1 &
done

# capture all of the children process IDs and wait for them to finish
wait

end=`date +%s`
runtime=$((end-start))
#echo "Total time: $runtime"

